<!DOCTYPE html>
<html lang="ru">
<head>
    <title>localStorage</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="/assets/course74/keksik-style.css">
</head>
<body>
<header class="page-header">Путевые заметки</header>
<main>
    <form action="/echo" method="post">
        <label for="note">Текст заметки</label>
        <textarea id="note" name="note" rows="9">Пойми, в Норвегии только и говорят, что о море. Как оно бесконечно прекрасно… О закате, который они видели… О том, как солнце, погружаясь в волны, стало алым как кровь. И почувствовали, что море впитало энергию светила в себя, и солнце было укрощено, и огонь уже догорал в глубине.</textarea>
        <div class="buttons">
            <input type="submit" value="Сохранить">
        </div>
    </form>
</main>
<footer class="page-footer"></footer>

<script>
    if (window.localStorage) {
        var elements = document.querySelectorAll('[name]');

        for (var i = 0, length = elements.length; i < length; i++) {
            (function(element) {
                var name = element.getAttribute('name');

                element.value = localStorage.getItem(name) || '';

                element.onkeyup = function() {
                    localStorage.setItem(name, element.value);
                };
            })(elements[i]);
        }
    }
</script>

</body>
</html>